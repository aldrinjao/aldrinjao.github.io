(this["webpackJsonpdata-overlay"]=this["webpackJsonpdata-overlay"]||[]).push([[0],{102:function(e){e.exports=JSON.parse("{}")},103:function(e){e.exports=JSON.parse("{}")},112:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),c=t(12),l=t.n(c),s=(t(80),t(51)),r=t.n(s),o=t(62),d=t(13),m=t(5),u=t(45),b=t.n(u),j=t(2),p=function(e){var a=e.basemaps,t=e.activeBaseMap,n=e.changeBaseMap;return Object(j.jsx)("div",{className:"toggle-group absolute top right mr60 mt12 border border--2 border--white bg-white shadow-darken10 z1",children:a.map((function(e,a){return Object(j.jsxs)("label",{className:"toggle-container",children:[Object(j.jsx)("input",{onChange:function(){return n(a)},checked:e.name===t.name,name:"toggle",type:"radio"}),Object(j.jsx)("div",{className:"toggle txt-s py3 toggle--active-white",children:e.name})]},a)}))})},f=(t(83),t(52)),g=t.n(f),h=t(63),x=(t(102),t(103),t(17)),y=t(46),O=t(139),v=function(e){var a=e.id,t=e.name,n=e.checked,i=e.setLayerlist,c=e.maplayers;return Object(j.jsxs)("div",{children:[Object(j.jsx)(O.a,{color:"primary",id:a,name:t,checked:n,onClick:function(e){e.stopPropagation();var a=c.map((function(a){e.target.checked;return e.target.name===a.name&&(a.checked=!a.checked),a}));i(a)},title:"toggle layer",style:{transform:"scale(0.8)"}}),t]})},k=function(e){e.stops,e.styling,e.name;var a=e.legend;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"bg-white py6 px12 shadow-darken10 round z1",children:a.map((function(e,a){return Object(j.jsxs)("div",{className:"txt-m",children:[Object(j.jsx)("span",{className:"mr12 round-full w12 h12 inline-block align-middle",style:{backgroundColor:e[1]}}),Object(j.jsx)("span",{children:"".concat(e[0].toLocaleString())})]},a)}))})})},C=t(135),w=Object(C.a)({root:{padding:"5px 10px",width:"100%"},sliderLayer:{width:"100%",display:"flex",alignItems:"center",margin:"auto",justifyContent:"space-between"},sliderLabels:{width:"80%",display:"flex",alignItems:"center"},layerDesc:{fontSize:".8rem",lineHeight:"1.2",margin:"0px 0px 0px 0px"}}),N=[{name:"Basemap1",description:"Estimated total population",property:"pop_est",stops:[[0,"#f8d5cc"],[1e6,"#231266"],[5e6,"#f1a8a5"],[1e7,"#ee8f9a"],[5e7,"#ec739b"],[1e8,"#aaff12"],[25e7,"#c44cc0"],[5e8,"#9f43d7"],[1e9,"#6e40e6"]]},{name:"Basemap2",description:"Estimate total GDP in millions of dollars",property:"gdp_md_est",stops:[[0,"#f8d5cc"],[1e3,"#f4bfb6"],[5e3,"#f1a8a5"],[1e4,"#ee8f9a"],[5e4,"#ec739b"],[1e5,"#dd5ca8"],[25e4,"#c44cc0"],[5e6,"#9f43d7"],[1e7,"#6e40e6"]]}],S=function(e){e.id;var a=e.name,t=(e.checked,e.setLayerlist,e.maplayers,e.description),i=(e.opacity,e.styling),c=w(),l=Object(n.useState)(N[0]),s=Object(m.a)(l,2),r=s[0];s[1];return Object(j.jsxs)("div",{className:c.root,children:[Object(j.jsx)("div",{className:c.layerDesc,children:t}),Object(j.jsx)(k,{active:r,stops:r.stops,legend:i[a].legend})]})},L=t(138),P=t(142),F=t(42),I=t.n(F),R=t(114),B=function(e){e.displayFPanel;var a=e.setdisplayFPanel,t=(e.points,e.setPoints,e.categories),n=e.setCategories,c=(e.incidentDate,e.setincidentDate),l=i.a.useState([2010,2021]),s=Object(m.a)(l,2),r=s[0],o=s[1];var u=function(e){e.stopPropagation();var a=Object(d.a)(t);t.forEach((function(a){var t=Object.keys(a)[0];t===e.target.name&&(a[t]=e.target.checked)})),n(a)};return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"panelTitleRow",children:[Object(j.jsx)("span",{className:"panelTitle",children:"Incidents"}),Object(j.jsx)("span",{className:"panelIcon",children:Object(j.jsx)(R.a,{onClick:function(){a(!1)},children:Object(j.jsx)(I.a,{})})})]}),Object(j.jsxs)("span",{children:["Years: ",r[0],"-",r[1]]}),Object(j.jsx)(L.a,{sx:{width:190},className:"filterBox",children:Object(j.jsx)(P.a,{getAriaLabel:function(){return"Temperature range"},value:r,onChange:function(e,a){o(a);var t=[{start:a[0]},{end:a[1]}];c(t)},valueLabelDisplay:"auto",min:2010,max:2021,marks:!0})}),"Cause",Object(j.jsxs)("div",{className:"txt-m",children:[Object(j.jsx)(O.a,{color:"primary",id:"shadow",name:"shadow",onClick:u,title:"toggle layer",style:{padding:" 0 5px",transform:"scale(0.8)"}}),Object(j.jsx)("span",{className:"mr12 round-full w12 h12 inline-block align-middle",style:{backgroundColor:"#727272"}}),Object(j.jsx)("span",{children:"Shadow economy"})]}),Object(j.jsxs)("div",{className:"txt-m",children:[Object(j.jsx)(O.a,{color:"primary",id:"resource",name:"resource",onClick:u,title:"toggle layer",style:{padding:" 0 5px",transform:"scale(0.8)"}}),Object(j.jsx)("span",{className:"mr12 round-full w12 h12 inline-block align-middle",style:{backgroundColor:"#01a812"}}),Object(j.jsx)("span",{children:"Resource issue"})]}),Object(j.jsxs)("div",{className:"txt-m",children:[Object(j.jsx)(O.a,{color:"primary",id:"political",name:"political",onClick:u,title:"toggle layer",style:{padding:" 0 5px",transform:"scale(0.8)"}}),Object(j.jsx)("span",{className:"mr12 round-full w12 h12 inline-block align-middle",style:{backgroundColor:"#f82d00"}}),Object(j.jsx)("span",{children:"Political issue"})]}),Object(j.jsxs)("div",{className:"txt-m",children:[Object(j.jsx)(O.a,{color:"primary",id:"identity",name:"identity",onClick:u,title:"toggle layer",style:{padding:" 0 5px",transform:"scale(0.8)"}}),Object(j.jsx)("span",{className:"mr12 round-full w12 h12 inline-block align-middle",style:{backgroundColor:"#ffa32b"}}),Object(j.jsx)("span",{children:"Identity issue"})]}),Object(j.jsxs)("div",{className:"txt-m",children:[Object(j.jsx)(O.a,{color:"primary",id:"governance",name:"governance",onClick:u,title:"toggle layer",style:{padding:" 0 5px",transform:"scale(0.8)"}}),Object(j.jsx)("span",{className:"mr12 round-full w12 h12 inline-block align-middle",style:{backgroundColor:"#8d00bc"}}),Object(j.jsx)("span",{children:"Governance issue"})]}),Object(j.jsxs)("div",{className:"txt-m",children:[Object(j.jsx)(O.a,{color:"primary",id:"common",name:"common",onClick:u,title:"toggle layer",style:{padding:" 0 5px",transform:"scale(0.8)"}}),Object(j.jsx)("span",{className:"mr12 round-full w12 h12 inline-block align-middle",style:{backgroundColor:"#00a1d6"}}),Object(j.jsx)("span",{children:"Common crime"})]}),Object(j.jsxs)("div",{className:"txt-m",children:[Object(j.jsx)(O.a,{color:"primary",id:"other",name:"other",onClick:u,title:"toggle layer",style:{padding:" 0 5px",transform:"scale(0.8)"}}),Object(j.jsx)("span",{className:"mr12 round-full w12 h12 inline-block align-middle",style:{backgroundColor:"#ffffff",border:"1px solid black"}}),Object(j.jsx)("span",{children:"Other issue"})]})]})},D=t(140),M=t(136),A=t(137),z=t(66),T=t.n(z),E=t(50),U=t.n(E),H=t(64),J=t.n(H),W=function(e){var a=e.maplayers,t=e.setLayerlist,i=e.styling,c=e.points,l=e.setPoints,s=e.categories,r=e.setCategories,o=e.incidentDate,d=e.setincidentDate,u=Object(n.useState)(!0),b=Object(m.a)(u,2),p=b[0],f=b[1],g=Object(n.useState)(!0),h=Object(m.a)(g,2),O=h[0],k=h[1];function C(){k(!O)}return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"",children:Object(j.jsx)("div",{className:"bg-white absolute mt12 ml12 shadow-darken10 round",children:Object(j.jsx)(R.a,{onClick:C,children:Object(j.jsx)(J.a,{})})})}),Object(j.jsx)("div",{className:O?null:"hidden",children:Object(j.jsxs)("div",{id:"layerpanel",className:"bg-white absolute mt12 ml12 py12 px12 shadow-darken10 round z1 width400",children:[Object(j.jsxs)("div",{className:"panelTitleRow",children:[Object(j.jsx)("div",{className:"panelTitle",children:"Layers"}),Object(j.jsx)("div",{children:Object(j.jsx)(R.a,{onClick:C,children:Object(j.jsx)(I.a,{})})})]}),Object(j.jsx)(y.a,{onDragEnd:function(e){if(e.destination){var n=Array.from(a),i=n.splice(e.source.index,1),c=Object(m.a)(i,1)[0];n.splice(e.destination.index,0,c),t(n)}},children:Object(j.jsx)(y.c,{droppableId:"layers",children:function(e){return Object(j.jsxs)("ul",Object(x.a)(Object(x.a)({},e.droppableProps),{},{ref:e.innerRef,className:"cardcontainer",children:[a.map((function(e,n){var c=e.id,l=e.name,s=e.checked,r=e.opacity,o=e.description;return Object(j.jsx)(y.b,{draggableId:c,index:n,children:function(e){return Object(j.jsx)("li",Object(x.a)(Object(x.a)({ref:e.innerRef},e.draggableProps),{},{className:"listitem",children:Object(j.jsxs)(D.a,{className:"layeracc",children:[Object(j.jsx)(M.a,{expandIcon:Object(j.jsx)(T.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(j.jsxs)("div",{className:"layerRow",children:[Object(j.jsx)("span",Object(x.a)(Object(x.a)({className:"material-icons handle",title:"drag to reorder"},e.dragHandleProps),{},{children:"drag_indicator"})),Object(j.jsx)(v,{id:c,name:l,checked:s,setLayerlist:t,maplayers:a})]})}),Object(j.jsx)(A.a,{children:Object(j.jsx)(S,{id:c,name:l,checked:s,setLayerlist:t,maplayers:a,opacity:r,description:o,styling:i})})]})}))}},c)})),e.placeholder]}))}})})]})}),Object(j.jsxs)("div",{className:O?"filterPanelexp":"filterPanelcol",children:[Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"bg-white absolute mt12 shadow-darken10 round",children:Object(j.jsx)(R.a,{onClick:function(){f(!0)},children:Object(j.jsx)(U.a,{})})})}),Object(j.jsx)("div",{className:p?null:"hidden",children:Object(j.jsx)("div",{className:"bg-white absolute mt12 py12 px12 shadow-darken10 round z1 width290",children:Object(j.jsx)(B,{displayFPanel:p,setdisplayFPanel:f,points:c,setPoints:l,categories:s,setCategories:r,incidentDate:o,setincidentDate:d})})})]})]})};b.a.accessToken="pk.eyJ1IjoicnVtcC1jb25mbGljdGFsZXJ0IiwiYSI6ImNrczRiMjhlbjFvN2gyeXJ3cWVmNGJueWoifQ.4PjwrtDVrh5i919c0hBCTA";var G=function(){var e=[{name:"Streets",url:"mapbox://styles/mapbox/streets-v11"},{name:"Satellite",url:"mapbox://styles/mapbox/satellite-v9"},{name:"Light",url:"mapbox://styles/mapbox/light-v10"},{name:"Dark",url:"mapbox://styles/mapbox/dark-v10"}],a={shadow:"#727272",resource:"#01a812",political:"#f82d00",identity:"#ffa32b",common:"#00a1d6",governance:"#8d00bc",other:"#ffffff"},t={shadow:"Shadow economy",resource:"Resource issue",political:"Political issue",identity:"Identity issue",common:"Common crome",governance:"Governance issue",other:"Other issue"},i=Object(n.useState)(null),c=Object(m.a)(i,2),l=c[0],s=c[1],u=Object(n.useState)(null),f=Object(m.a)(u,2),x=f[0],y=f[1],O=Object(n.useState)(null),v=Object(m.a)(O,2),k=v[0],C=v[1],w=Object(n.useState)(null),N=Object(m.a)(w,2),S=N[0],L=N[1],P=Object(n.useState)(!0),F=Object(m.a)(P,2),I=F[0],R=F[1],B=Object(n.useRef)(null),D=Object(n.useState)(null),M=Object(m.a)(D,2),A=M[0],z=M[1],T=Object(n.useState)(e[0]),E=Object(m.a)(T,2),U=E[0],H=E[1],J=Object(n.useState)(h),G=Object(m.a)(J,2),V=G[0],_=(G[1],function(){Object(d.a)(l).reverse().map((function(e){e.checked?A.addLayer({id:e.name,type:e.type,source:e.name,"source-layer":e.column,paint:V[e.name].paint}):void 0!==A.getLayer(e.name)&&A.removeLayer(e.name)}))});Object(n.useEffect)((function(){X();var e=new b.a.Map({container:B.current,style:U.url,center:[124,8],zoom:7,maxZoom:15,minZoom:7});return e.on("load",(function(){z(e)})),e.addControl(new b.a.NavigationControl),function(){return e.remove()}}),[]),Object(n.useEffect)((function(){A&&Y(A)}),[l]),Object(n.useEffect)((function(){A&&(A.setStyle(U.url),A.on("style.load",(function(){Y(A)})))}),[U]),Object(n.useEffect)((function(){A&&Y(A)}),[k]),Object(n.useEffect)((function(){A&&Y(A)}),[S]);var Z=function(){console.log("===================="),null!=k&&k.forEach((function(e){var n=Object.keys(e)[0];if(Object.values(e)[0]){var i=x.filter((function(e){return e.cause==t[n]})).filter((function(e){return e.year>=S[0].start&&e.year<=S[1].end}));void 0!==A.getLayer(n)&&(A.removeLayer(n),A.removeSource(n)),console.log(i);var c=i.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude]}}}));console.log(c),A.addLayer({id:n,type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:c}},paint:{"circle-color":a[n]}})}else void 0!==A.getLayer(n)&&(A.removeLayer(n),A.removeSource(n),console.log("remove ",n))}))},X=function(){var e=Object(o.a)(r.a.mark((function e(){var a,t,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("data.json");case 2:return a=e.sent,e.next=5,a.data;case 5:return t=e.sent,s(Object.values(t)),e.next=9,g.a.get("incidents.json");case 9:return n=e.sent,e.next=12,n.data;case 12:i=e.sent,y(Object.values(i)),R(!1),C([{shadow:!1},{resource:!1},{political:!1},{identity:!1},{common:!1},{governance:!1},{other:!1}]),L([{start:2010},{end:2021}]);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(e){Q(),_(),z(e),Z()},Q=function(){A&&l.map((function(e){void 0!==A.getLayer(e.name)&&A.removeLayer(e.name),A.getSource(e.name)&&A.removeSource(e.name),A.addSource(e.name,{type:"vector",url:"mapbox://"+e.url,minzoom:2})}))};return I?Object(j.jsx)("div",{children:Object(j.jsx)("div",{ref:B,className:"map-container"})}):Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{ref:B,className:"map-container"}),Object(j.jsx)(p,{basemaps:e,activeBaseMap:U,changeBaseMap:function(a){H(e[a])}}),Object(j.jsx)(W,{maplayers:l,setLayerlist:s,points:x,setPoints:y,styling:V,categories:k,setCategories:C,incidentDate:S,setincidentDate:L})]})};var V=function(){return Object(j.jsx)("div",{children:Object(j.jsx)(G,{})})};l.a.render(Object(j.jsx)(V,{}),document.getElementById("root"))},63:function(e){e.exports=JSON.parse('{"Service POIS":{"id":"3","name":"Service POIS","paint":{"circle-color":["match",["get","RUMP"],"Community use","#eacb00","Commercial use","#b82b30","hsla(0, 0%, 0%, 0)"],"circle-radius":["interpolate",["linear"],["zoom"],0,3,5,3.3000000000000003,10,4.199999999999999,22,6],"circle-stroke-color":["match",["get","RUMP"],"Community use","rgb(164, 142, 0)","Commercial use","rgb(129, 30, 34)","hsla(0, 0%, 0%, 0)"],"circle-stroke-width":0.75},"legend":[["Community use","#eacb00"],["Commercial use","#b82b30"]]},"Service Links":{"id":"4","name":"Service Links","paint":{"line-color":["match",["get","RUMP"],"Community use","#eacb00","Commercial use","#b82b30","hsla(0, 0%, 0%, 0)"],"line-opacity":1},"legend":[["Community use","#eacb00"],["Commercial use","#b82b30"]]},"RUMP":{"id":"5","name":"RUMP","paint":{"fill-color":["match",["get","RUMP"],"Restoration area","#3655d2","Commercial use","hsl(358, 62%, 45%)","Community use","#eacb00","Protection area","#00960f","hsla(0, 0%, 0%, 0)"]},"legend":[["Restoration area","#3655d2"],["Commercial use","hsl(358, 62%, 45%)"],["Community use","#eacb00"],["Protection area","#00960f"]]},"Land Cover":{"id":"6","name":"Land Cover","paint":{"fill-color":["match",["get","Landcover"],"Annual crop","#bb710a","Built-up area","#e4b700","Canopy","#00640d","Fallow","#96b357","Forest","hsl(26, 75%, 63%)","Inland water","hsl(2, 70%, 61%)","Open sand/Barren","#a7a7a7","Wetland","#4c563b","Perrenial crop","#3d9949","hsla(0, 0%, 0%, 0)"]},"legend":[["Annual crop","#bb710a"],["Built-up area","#e4b700"],["Canopy","#00640d"],["Fallow","#96b357"],["Forest","hsl(26, 75%, 63%)"],["Inland water","hsl(2, 70%, 61%)"],["Open sand/Barren","#a7a7a7"],["Wetland","#4c563b"],["Perrenial crop","#3d9949"]]},"TLA":{"id":"7","name":"TLA","paint":{"fill-color":["interpolate",["exponential",1],["get","DN"],96,"hsl(295, 78%, 73%)",169,"hsl(266, 83%, 68%)",242,"#377eb8"],"fill-opacity":0.5},"legend":[["TLA","#377eb8"]]},"Flood Susceptibility":{"id":"8","name":"Flood Susceptibility","paint":{"fill-color":["match",["get","FloodSusc"],"Low Flooding","#ffd501","Very High Flooding","#b20b00","Medium Flooding","#ff9f05","High Flooding","#ff3401","hsla(0, 0%, 0%, 0)"],"fill-opacity":0.5},"legend":[["Low Flooding","#ffd501"],["Very High Flooding","#b20b00"],["Medium Flooding","#ff9f05"],["High Flooding","#ff3401"]]},"Unclaimed Areas":{"id":"9","name":"Unclaimed Areas","paint":{"fill-color":["interpolate",["exponential",1],["get","Area"],0,"#ff7f00",10000000,"#ff7f00"],"fill-opacity":0.5},"legend":[["Unclaimed Areas","#ff7f00"]]},"Indicative Boundary":{"id":"10","name":"Indicative Boundary","paint":{"line-color":"rgb(175, 163, 163)","line-width":2},"legend":[["Indicative Boundary","rgb(175, 163, 163)"]]},"Land Use":{"id":"11","name":"Land Use","paint":{"fill-color":["match",["get","Landuse"],"Forest","#00640d","Closed forest","#004e03","Ricefield","#f0af08","Coconut-dominated area","#4fc16c","Industrial area","#676767","Residential/Built-up area","#ffea25","Brushland","#9aca7c","Tree farm","#6fe5a6","Riparian forest","#148b69","hsla(0, 0%, 0%, 0)"],"fill-opacity":0.5},"legend":[["Forest","#00640d"],["Closed forest","#004e03"],["Ricefield","#f0af08"],["Coconut-dominated area","#4fc16c"],["Industrial area","#676767"],["Residential area/Built-up area","#ffea25"],["Brushland","#9aca7c"],["Tree farm","#6fe5a6"],["Riparian forest","#148b69"]]},"Mining Sites":{"id":"11","name":"Mining Sites","paint":{"fill-color":["interpolate",["exponential",1],["get","fid"],0,"#c07a00",1000000,"#c07a00"],"fill-opacity":0.5},"legend":[["Mining Sites","#c07a00"]]},"NIPAS System":{"id":"12","name":"NIPAS System","paint":{"fill-color":["interpolate",["exponential",1],["get","DN"],0,"#94d180",1000000,"#94d180"],"fill-opacity":0.5},"legend":[["NIPAS System","#94d180"]]},"River Basin":{"id":"13","name":"River Basin","paint":{"fill-color":["interpolate",["exponential",1],["get","DN"],0,"#377eb8",300,"#377eb8"],"fill-opacity":0.5},"legend":[["River Basin","#377eb8"]]},"Proc Watershed":{"id":"13","name":"Proc Watershed","paint":{"fill-color":["interpolate",["exponential",1],["get","fid"],0,"#a5bfdd",300,"#a5bfdd"],"fill-opacity":0.5},"legend":[["Proc Watershed","#a5bfdd"]]},"Landslide Hazard":{"id":"14","name":"Landslide Hazard","paint":{"fill-color":["match",["get","FID"],0,"#ffd501",1,"#ff9f05",3,"#ff3401","hsla(0, 0%, 0%, 0)"],"fill-opacity":0.5},"legend":[["Low","#ffd501"],["Medium","#ff9f05"],["High","#ff3401"]]},"Faultlines":{"id":"15","name":"Landslide Hazard","paint":{"line-color":["match",["get","status"],"Active","#b20b00","Potential","#ff9f05","hsla(0, 0%, 0%, 0)"]},"legend":[["Active","#b20b00"],["Potential","#ff9f05"]]}}')},80:function(e,a,t){},83:function(e,a,t){}},[[112,1,2]]]);
//# sourceMappingURL=main.576006c3.chunk.js.map